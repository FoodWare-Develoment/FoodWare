<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:FoodWare.Shared.Entities;assembly=FoodWare.Shared"
             x:Class="FoodWare.Mobile.MainPage"
             BackgroundColor="#F5F6FA"
             Title="Menú Digital">

    <Grid RowDefinitions="Auto, *, Auto">

        <ScrollView Grid.Row="0" Orientation="Horizontal" 
                    HorizontalScrollBarVisibility="Never" 
                    Padding="10,10,10,5">
            <HorizontalStackLayout Spacing="10" x:Name="HslCategorias">
                <Button Text="Cargando..." 
                        BackgroundColor="White" 
                        TextColor="#2C3E50" 
                        BorderColor="#2C3E50" 
                        BorderWidth="1" 
                        CornerRadius="20" 
                        HeightRequest="40"/>
            </HorizontalStackLayout>
        </ScrollView>

        <CollectionView Grid.Row="1" x:Name="CvPlatillos" Margin="5">
            <CollectionView.ItemsLayout>
                <GridItemsLayout Orientation="Vertical" Span="2" HorizontalItemSpacing="10" VerticalItemSpacing="10"/>
            </CollectionView.ItemsLayout>
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="models:Platillo">
                    <Border Padding="10" BackgroundColor="White" Stroke="Transparent">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Border.Shadow>
                            <Shadow Brush="Black" Offset="2,2" Radius="5" Opacity="0.1"/>
                        </Border.Shadow>
                        <Border.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnPlatilloTapped" CommandParameter="{Binding .}"/>
                        </Border.GestureRecognizers>

                        <VerticalStackLayout Spacing="5">
                            <BoxView Color="#3498DB" 
                                     HeightRequest="40" WidthRequest="40" 
                                     CornerRadius="20" HorizontalOptions="Center"/>

                            <Label Text="{Binding Nombre}" 
                                   FontSize="14" FontAttributes="Bold" 
                                   TextColor="#2C3E50" 
                                   HorizontalTextAlignment="Center" 
                                   MaxLines="2" LineBreakMode="TailTruncation"/>

                            <Label Text="{Binding PrecioVenta, StringFormat='${0:F2}'}" 
                                   FontSize="14" TextColor="#27AE60" 
                                   HorizontalTextAlignment="Center"/>

                            <Label Text="{Binding Categoria}"
                                   FontSize="10" TextColor="#7F8C8D"
                                   HorizontalTextAlignment="Center"/>
                        </VerticalStackLayout>
                    </Border>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <Border Grid.Row="2" Margin="15" Padding="15" BackgroundColor="#2C3E50" Stroke="Transparent">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="25"/>
            </Border.StrokeShape>
            <Border.Shadow>
                <Shadow Brush="Black" Offset="0,5" Radius="10" Opacity="0.3"/>
            </Border.Shadow>

            <Grid ColumnDefinitions="*, Auto">
                <VerticalStackLayout Grid.Column="0" VerticalOptions="Center">
                    <Label Text="Total Comanda" TextColor="White" FontSize="12"/>
                    <Label x:Name="LblTotalPedido" Text="$0.00" TextColor="White" FontSize="20" FontAttributes="Bold"/>
                </VerticalStackLayout>

                <Button Grid.Column="1" Text="Ver (0)" x:Name="BtnVerPedido"
                        BackgroundColor="#27AE60" TextColor="White" 
                        CornerRadius="15" HeightRequest="40"
                        Clicked="BtnVerPedido_Clicked"/>
            </Grid>
        </Border>

    </Grid>
</ContentPage>